function speak(text) {
  if (!('speechSynthesis' in window)) return;
  speechSynthesis.cancel();
  function _speak() {
    const utter = new SpeechSynthesisUtterance(text);
    utter.lang = "en-US";
    // Prefer Google US English if available
    const voices = speechSynthesis.getVoices();
    utter.voice = voices.find(v => v.lang === "en-US" && v.name.includes("Google")) ||
                  voices.find(v => v.lang.startsWith("en")) || voices[0];
    speechSynthesis.speak(utter);
  }
  if (speechSynthesis.getVoices().length === 0) {
    speechSynthesis.addEventListener("voiceschanged", _speak, { once: true });
  } else {
    _speak();
  }
}

function askAI() {
  const promptText = prompt("Type anything, Joey will speak it back:");
  if (!promptText) return;
  // Speak immediately
  speak(promptText);
  alert("Joey said: " + promptText);
}
