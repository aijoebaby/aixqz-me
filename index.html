<!<img id="joey" src="joey.png" alt="Joey" style="max-width:240px;width:100%;border-radius:16px;display:block;margin:12px auto;">
 html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AIJOE</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; margin: 0; background:#0f172a; color:#e2e8f0; }
    .wrap { max-width: 720px; margin: 40px auto; padding: 16px; }
    h1 { margin: 0 0 16px; font-size: 28px; }
    .card { background:#111827; border:1px solid #1f2937; border-radius:16px; padding:16px; }
    .row { display:flex; gap:8px; margin-top:12px; }
    input[type="text"] { flex:1; padding:12px; border-radius:12px; border:1px solid #334155; background:#0b1220; color:#e2e8f0; }
    button { padding:12px 16px; border-radius:12px; border:0; background:#22c55e; color:#0b1220; font-weight:700; cursor:pointer; }
    button:disabled { opacity:0.6; cursor:not-allowed; }
    .out { white-space:pre-wrap; background:#0b1220; border:1px solid #334155; border-radius:12px; padding:12px; min-height:80px; margin-top:12px; }
    small { color:#94a3b8; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>AIJOE HELLO üê∂</h1>

    <div class="card">
      <small>Connected to:</small>
      <div id="health" class="out">Checking‚Ä¶</div>

      <div class="row">
        <input id="userText" type="text" placeholder="Ask Joey anything‚Ä¶" />
        <button id="askBtn">Ask</button>
      </div>

      <div id="reply" class="out" aria-live="polite"></div>
    </div>
  </div>

  <script>
    // === The ONLY endpoint your app should call ===
    const AIJOE_ENDPOINT = "https://aixqz.life/.netlify/functions/askAI";

    const healthEl = document.getElementById("health");
    const replyEl  = document.getElementById("reply");
    const askBtn   = document.getElementById("askBtn");
    const inputEl  = document.getElementById("userText");

    // Health check on load (helps catch ‚Äúnetwork error‚Äù early)
    (async function ping() {
      try {
        const res  = await fetch(AIJOE_ENDPOINT, { method: "GET" });
        const data = await res.json();
        healthEl.textContent = JSON.stringify(data);
      } catch (e) {
        healthEl.textContent = "Connection problem ‚ùå";
        console.error(e);
      }
    })();

    async function askAI(userText) {
      const res = await fetch(AIJOE_ENDPOINT, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ text: userText }),
      });
      if (!res.ok) {
        const txt = await res.text().catch(() => "");
        throw new Error("Bad response: " + res.status + " " + txt);
      }
      const data = await res.json();
      return data.reply || "(no reply)";
    }

    async function onAsk() {
      const msg = (inputEl.value || "").trim();
      if (!msg) { inputEl.focus(); return; }
      askBtn.disabled = true;
      replyEl.textContent = "Joey is thinking‚Ä¶ üêæ";
      try {
        const reply = await askAI(msg);
        replyEl.textContent = reply;
      } catch (e) {
        replyEl.textContent = "Network error. Check endpoint and Netlify function.";
        console.error(e);
      } finally {
        askBtn.disabled = false;
      }
    }

    askBtn.addEventListener("click", onAsk);
    inputEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") onAsk();
    });
  </script>
<<script>
// === AIJOE API endpoint (single source of truth) ===
window.AIJOE_ENDPOINT = "https://aixqz.life/.netlify/functions/askAI";

// Wrap your existing ask function (or define one if missing)
async function askAI(userText) {
  const res = await fetch(window.AIJOE_ENDPOINT, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ text: userText }),
  });
  if (!res.ok) throw new Error("Bad response " + res.status);
  const data = await res.json();
  return data.reply || "(no reply)";
}

// Optional: quick health check on load
(async () => {
  try {
    const r = await fetch(window.AIJOE_ENDPOINT, { method: "GET" });
    const j = await r.json();
    console.log("AIJOE health:", j);
  } catch (e) {
    console.warn("AIJOE not reachable:", e);
  }
})();
</script>
body>
</html>
